Started GET "/" for ::1 at 2022-08-21 15:24:37 +0200
  [1m[35m (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ExercisesController#index as HTML
  [1m[36mExercise Load (5.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY "exercises"."created_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 1], ["LIMIT", 15], ["OFFSET", 0]]
  â†³ app/controllers/exercises_controller.rb:14:in `index'
  Rendering exercises/index.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "exercises" WHERE "exercises"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/views/exercises/index.html.erb:22
  Rendered exercises/index.html.erb within layouts/application (Duration: 17.3ms | Allocations: 7012)
  Rendered users/_login.html.erb (Duration: 1.4ms | Allocations: 526)
  Rendered layouts/_header.html.erb (Duration: 4.3ms | Allocations: 1376)
  Rendered layouts/_footer.html.erb (Duration: 1.0ms | Allocations: 212)
Completed 200 OK in 96ms (Views: 52.8ms | ActiveRecord: 11.7ms | Allocations: 26081)


Started GET "/statistics/index" for ::1 at 2022-08-21 15:24:48 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:6:in `index'
  [1m[36mExercise Load (0.8ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:11:in `index'
  [1m[35m (6.8ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `evolution_time'
  [1m[36mExercise Load (4.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `map'
  [1m[36mExerciseNode Load (12.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:56:in `top_exercise'
  [1m[36mExerciseNode Load (11.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (9.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (7.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (47.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:81:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (8.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (4.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:106:in `evolution_ws'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (8.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('brusaky lavicka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  Rendering statistics/index.html.erb within layouts/application
  Rendered statistics/index.html.erb within layouts/application (Duration: 7.6ms | Allocations: 6723)
  Rendered users/_login.html.erb (Duration: 0.3ms | Allocations: 233)
  Rendered layouts/_header.html.erb (Duration: 22.8ms | Allocations: 428)
  Rendered layouts/_footer.html.erb (Duration: 0.2ms | Allocations: 55)
Completed 200 OK in 296ms (Views: 38.4ms | ActiveRecord: 165.2ms | Allocations: 46333)


Started GET "/statistics/index" for ::1 at 2022-08-21 15:24:58 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:6:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:11:in `index'
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `evolution_time'
  [1m[36mExercise Load (2.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `map'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:56:in `top_exercise'
  [1m[36mExerciseNode Load (4.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (6.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (46.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:81:in `bottom_exercise'
  [1m[36mExerciseNode Load (4.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (6.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:106:in `evolution_ws'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (5.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('brusaky lavicka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  Rendering statistics/index.html.erb within layouts/application
  Rendered statistics/index.html.erb within layouts/application (Duration: 3.5ms | Allocations: 5856)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 231)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 417)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 55)
Completed 200 OK in 178ms (Views: 8.2ms | ActiveRecord: 123.5ms | Allocations: 33264)


Started GET "/statistics/index" for ::1 at 2022-08-21 15:25:05 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:6:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:11:in `index'
  [1m[35m (5.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `evolution_time'
  [1m[36mExercise Load (4.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `map'
  [1m[36mExerciseNode Load (5.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:56:in `top_exercise'
  [1m[36mExerciseNode Load (6.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (50.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:81:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (8.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:106:in `evolution_ws'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('brusaky lavicka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  Rendering statistics/index.html.erb within layouts/application
  Rendered statistics/index.html.erb within layouts/application (Duration: 5.5ms | Allocations: 5857)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 231)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 417)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 55)
Completed 200 OK in 187ms (Views: 9.9ms | ActiveRecord: 127.0ms | Allocations: 33260)


Started GET "/statistics/index" for ::1 at 2022-08-21 15:25:07 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:6:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:11:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:43:in `map'
  [1m[36mExerciseNode Load (7.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:56:in `top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:64:in `block in top_exercise'
  [1m[36mExerciseNode Load (40.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:81:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:89:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:106:in `evolution_ws'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x__' OR exercise_nodes.series LIKE '_x_') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('brusaky lavicka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:117:in `block in evolution_ws'
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 40.1ms | Allocations: 9238)
  Rendered users/_login.html.erb (Duration: 1.4ms | Allocations: 486)
  Rendered layouts/_header.html.erb (Duration: 3.2ms | Allocations: 1311)
  Rendered layouts/_footer.html.erb (Duration: 1.2ms | Allocations: 199)
Completed 200 OK in 197ms (Views: 50.0ms | ActiveRecord: 99.0ms | Allocations: 39031)


Started GET "/" for ::1 at 2022-08-21 18:57:25 +0200
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ExercisesController#index as HTML
  [1m[36mExercise Load (4.2ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY "exercises"."created_at" DESC LIMIT $2 OFFSET $3[0m  [["user_id", 1], ["LIMIT", 15], ["OFFSET", 0]]
  â†³ app/controllers/exercises_controller.rb:14:in `index'
  Rendering layout layouts/application.html.erb
  Rendering exercises/index.html.erb within layouts/application
  [1m[35m (16.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "exercises" WHERE "exercises"."user_id" = $1[0m  [["user_id", 1]]
  â†³ app/views/exercises/index.html.erb:22
  Rendered exercises/index.html.erb within layouts/application (Duration: 41.6ms | Allocations: 7413)
  Rendered users/_login.html.erb (Duration: 1.8ms | Allocations: 456)
  Rendered layouts/_header.html.erb (Duration: 4.4ms | Allocations: 1322)
  Rendered layouts/_footer.html.erb (Duration: 1.3ms | Allocations: 185)
  Rendered layout layouts/application.html.erb (Duration: 248.3ms | Allocations: 56426)
Completed 200 OK in 312ms (Views: 237.1ms | ActiveRecord: 33.0ms | Allocations: 67994)


Started GET "/statistics/index" for ::1 at 2022-08-21 18:57:27 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (11.8ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (4.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (11.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:109:in `evolution_ws'
Completed 500 Internal Server Error in 173ms (ActiveRecord: 103.0ms | Allocations: 28595)


  
NoMethodError (undefined method `series_pattern' for #<StatisticsController:0x00000000009cb8>):
  
app/controllers/statistics_controller.rb:113:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:58:23 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (10.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
Completed 500 Internal Server Error in 178ms (ActiveRecord: 91.3ms | Allocations: 26960)


  
TypeError (no implicit conversion of nil into String):
  
app/controllers/statistics_controller.rb:99:in `+'
app/controllers/statistics_controller.rb:99:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:58:33 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (15.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:110:in `evolution_ws'
Completed 500 Internal Server Error in 184ms (ActiveRecord: 127.5ms | Allocations: 29718)


  
NoMethodError (undefined method `series_pattern' for #<StatisticsController:0x0000000000cd50>):
  
app/controllers/statistics_controller.rb:114:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:58:34 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.7ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:110:in `evolution_ws'
Completed 500 Internal Server Error in 107ms (ActiveRecord: 71.1ms | Allocations: 17297)


  
NoMethodError (undefined method `series_pattern' for #<StatisticsController:0x0000000000d070>):
  
app/controllers/statistics_controller.rb:114:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:58:34 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:110:in `evolution_ws'
Completed 500 Internal Server Error in 114ms (ActiveRecord: 73.9ms | Allocations: 17319)


  
NoMethodError (undefined method `series_pattern' for #<StatisticsController:0x0000000000d3e0>):
  
app/controllers/statistics_controller.rb:114:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:59:03 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_nodes"."series LIKE '?'" = $2 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $3[0m  [["user_id", 1], ["series LIKE '?'", "_x%"], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:125:in `evolution_ws'
Completed 500 Internal Server Error in 126ms (ActiveRecord: 77.8ms | Allocations: 28576)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column exercise_nodes.series LIKE '?' does not exist
LINE 1: ...er_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_...
                                                             ^
):
  
app/controllers/statistics_controller.rb:125:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:59:04 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (4.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (9.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (9.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (13.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (6.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (6.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (41.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_nodes"."series LIKE '?'" = $2 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $3[0m  [["user_id", 1], ["series LIKE '?'", "_x%"], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:125:in `evolution_ws'
Completed 500 Internal Server Error in 155ms (ActiveRecord: 113.7ms | Allocations: 16179)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column exercise_nodes.series LIKE '?' does not exist
LINE 1: ...er_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_...
                                                             ^
):
  
app/controllers/statistics_controller.rb:125:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 18:59:38 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (33.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_nodes"."series LIKE '?'" = $2 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $3[0m  [["user_id", 1], ["series LIKE '?'", "_x%"], ["LIMIT", 11]]
Completed 500 Internal Server Error in 135ms (ActiveRecord: 78.3ms | Allocations: 30907)


  [1m[36mExerciseNode Load (0.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND "exercise_nodes"."series LIKE '?'" = $2 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $3[0m  [["user_id", 1], ["series LIKE '?'", "_x%"], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff2370ca5b8>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:00:30 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (5.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (36.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (0.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 167ms (ActiveRecord: 84.8ms | Allocations: 30846)


  [1m[36mExerciseNode Load (0.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff235468780>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:00:31 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (3.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (4.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 108ms (ActiveRecord: 74.1ms | Allocations: 18470)


  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff235451d00>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:00:32 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (3.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 108ms (ActiveRecord: 73.9ms | Allocations: 18470)


  [1m[36mExerciseNode Load (0.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE ''_x%'') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff23530db38>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:00:49 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 156ms (ActiveRecord: 78.4ms | Allocations: 30589)


  [1m[36mCACHE ExerciseNode Load (0.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff23897ef50>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:00:49 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.4ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
Completed 500 Internal Server Error in 103ms (ActiveRecord: 69.4ms | Allocations: 18151)


  [1m[36mCACHE ExerciseNode Load (0.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) /* loading for inspect */ ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 11]]
  
NoMethodError (undefined method `title' for #<ExerciseNode::ActiveRecord_Relation:0x00007ff2389f8490>):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:01:45 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (1.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:126:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Compiling...
Started GET "/statistics/index" for ::1 at 2022-08-21 19:01:46 +0200
[Webpacker] Compiled all packs in /Users/matho/ExerNote/public/packs
[Webpacker] Hash: 8ec27c10447fe750ee15
Version: webpack 4.46.0
Time: 1985ms
Built at: 08/21/2022 7:01:49 PM
                                     Asset       Size       Chunks                         Chunk Names
    js/application-20a97ccd726ded6da2fc.js   1.63 MiB  application  [emitted] [immutable]  application
js/application-20a97ccd726ded6da2fc.js.map   1.43 MiB  application  [emitted] [dev]        application
                             manifest.json  364 bytes               [emitted]              
Entrypoint application = js/application-20a97ccd726ded6da2fc.js js/application-20a97ccd726ded6da2fc.js.map
[./app/javascript/channels sync recursive _channel\.js$] ./app/javascript/channels sync _channel\.js$ 160 bytes {application} [built]
[./app/javascript/channels/index.js] 211 bytes {application} [built]
[./app/javascript/packs/application.js] 824 bytes {application} [built]
    + 322 hidden modules

  Rendered statistics/index.html.erb within layouts/application (Duration: 4157.3ms | Allocations: 9806)
  Rendered users/_login.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 361)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 33)
  Rendered layout layouts/application.html.erb (Duration: 4162.0ms | Allocations: 13033)
Completed 200 OK in 4299ms (Views: 4163.1ms | ActiveRecord: 83.8ms | Allocations: 42067)


Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (1.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (30.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:126:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 21.4ms | Allocations: 5632)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 27.9ms | Allocations: 8715)
Completed 200 OK in 156ms (Views: 29.7ms | ActiveRecord: 72.8ms | Allocations: 37358)


Started GET "/search/index" for ::1 at 2022-08-21 19:02:03 +0200
Processing by SearchExercisesController#index as HTML
  Rendering layout layouts/application.html.erb
  Rendering search_exercises/index.html.erb within layouts/application
  Rendered search_exercises/index.html.erb within layouts/application (Duration: 4.1ms | Allocations: 691)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 13.2ms | Allocations: 3762)
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 0.0ms | Allocations: 4877)


Started GET "/statistics/index" for ::1 at 2022-08-21 19:02:05 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.7ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (1.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:126:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 16.0ms | Allocations: 5697)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 8778)
Completed 200 OK in 155ms (Views: 19.5ms | ActiveRecord: 73.9ms | Allocations: 25189)


Started GET "/statistics/index?title=Benc&series_pattern=" for ::1 at 2022-08-21 19:02:11 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"Benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.4ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (5.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (6.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (36.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('Benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:126:in `evolution_ws'
Completed 500 Internal Server Error in 110ms (ActiveRecord: 79.0ms | Allocations: 15440)


  
NoMethodError (undefined method `title' for nil:NilClass):
  
app/controllers/statistics_controller.rb:126:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index?title=Benc&series_pattern=" for ::1 at 2022-08-21 19:03:06 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"Benc", "series_pattern"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (1.7ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (30.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
Completed 500 Internal Server Error in 156ms (ActiveRecord: 79.3ms | Allocations: 27815)


  
NoMethodError (undefined method `title' for nil:NilClass):
  
app/controllers/statistics_controller.rb:128:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index" for ::1 at 2022-08-21 19:03:09 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (33.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.6ms | Allocations: 5699)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.7ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 8782)
Completed 200 OK in 122ms (Views: 19.7ms | ActiveRecord: 72.0ms | Allocations: 24928)


Started GET "/statistics/index" for ::1 at 2022-08-21 19:03:10 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.1ms | Allocations: 5691)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 8742)
Completed 200 OK in 119ms (Views: 17.6ms | ActiveRecord: 73.6ms | Allocations: 24763)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:03:13 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (8.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (0.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
Completed 500 Internal Server Error in 106ms (ActiveRecord: 76.7ms | Allocations: 15439)


  
NoMethodError (undefined method `title' for nil:NilClass):
  
app/controllers/statistics_controller.rb:128:in `evolution_ws'
app/controllers/statistics_controller.rb:23:in `index'
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:03:34 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (5.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (13.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 5634)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 8717)
Completed 200 OK in 167ms (Views: 17.8ms | ActiveRecord: 95.9ms | Allocations: 37345)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:04:14 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (13.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.7ms | Allocations: 5693)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.1ms | Allocations: 8744)
Completed 200 OK in 159ms (Views: 17.5ms | ActiveRecord: 89.0ms | Allocations: 24794)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:04:18 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (3.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 16.5ms | Allocations: 5693)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 8744)
Completed 200 OK in 126ms (Views: 20.6ms | ActiveRecord: 74.8ms | Allocations: 24755)


Started GET "/statistics/index" for ::1 at 2022-08-21 19:04:22 +0200
Processing by StatisticsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.8ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (41.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 12.8ms | Allocations: 5691)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 15.6ms | Allocations: 8742)
Completed 200 OK in 126ms (Views: 16.3ms | ActiveRecord: 80.8ms | Allocations: 24756)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:04:29 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:9:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:14:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:46:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:59:in `top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (15.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:67:in `block in top_exercise'
  [1m[36mExerciseNode Load (30.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:84:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:92:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.3ms | Allocations: 5693)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.1ms | Allocations: 8745)
Completed 200 OK in 125ms (Views: 16.5ms | ActiveRecord: 80.6ms | Allocations: 24774)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:05:31 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (1.8ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (17.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:109:in `evolution_ws'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:129:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.7ms | Allocations: 5634)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 18.0ms | Allocations: 8717)
Completed 200 OK in 195ms (Views: 18.8ms | ActiveRecord: 97.9ms | Allocations: 37315)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:06:08 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:127:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.4ms | Allocations: 5634)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.4ms | Allocations: 8697)
Completed 200 OK in 203ms (Views: 20.1ms | ActiveRecord: 85.1ms | Allocations: 37264)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:06:41 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (33.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:109:in `evolution_ws'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.5ms | Allocations: 5634)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.6ms | Allocations: 8724)
Completed 200 OK in 156ms (Views: 20.6ms | ActiveRecord: 84.4ms | Allocations: 37292)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:30:44 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.8ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (6.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:128:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.8ms | Allocations: 5445)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 8521)
Completed 200 OK in 154ms (Views: 17.7ms | ActiveRecord: 80.7ms | Allocations: 39318)


Started GET "/statistics/index?title=benc&series_pattern=" for ::1 at 2022-08-21 19:37:36 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>""}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (1.2ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (5.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.3ms | Allocations: 5445)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 8528)
Completed 200 OK in 156ms (Views: 17.3ms | ActiveRecord: 84.8ms | Allocations: 39301)


Started GET "/statistics/index?title=benc&series_pattern=s" for ::1 at 2022-08-21 19:37:42 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"s"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (1.8ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.1ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 8575)
Completed 200 OK in 120ms (Views: 17.3ms | ActiveRecord: 72.1ms | Allocations: 23768)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:37:51 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.0ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.1ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 8555)
Completed 200 OK in 118ms (Views: 17.2ms | ActiveRecord: 73.7ms | Allocations: 23715)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:40:19 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.7ms | Allocations: 6361)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 415)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1240)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 22.7ms | Allocations: 10977)
Completed 200 OK in 133ms (Views: 24.0ms | ActiveRecord: 77.9ms | Allocations: 26877)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:40:24 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.7ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.6ms | Allocations: 5508)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.6ms | Allocations: 8568)
Completed 200 OK in 117ms (Views: 18.0ms | ActiveRecord: 72.4ms | Allocations: 23746)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:40:29 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 5503)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.9ms | Allocations: 8574)
Completed 200 OK in 120ms (Views: 18.3ms | ActiveRecord: 71.3ms | Allocations: 23745)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:41:27 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 19.9ms | Allocations: 10594)
  Rendered layout layouts/application.html.erb (Duration: 20.1ms | Allocations: 10658)
Completed 500 Internal Server Error in 133ms (ActiveRecord: 81.9ms | Allocations: 26525)


  
ActionView::Template::Error (undefined local variable or method `r' for #<ActionView::Base:0x00000000021908>):
     96:           <!--          <input type="text" class="col-7 text-center input-unstyled" name="series_pattern" value="<%#= @series_pattern %>" autocomplete="off"/>-->
     97:           <button class="btn btn-secondary dropdown-toggle col-7 text-center " type="button" id="dropdownMenuButton" name="series_pattern" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" value="<%= @series_pattern %>"/>
     98:           <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
     99:             <a class="dropdown-item">r <% @series_pattern = r %></a>
    100:             <a class="dropdown-item" href="#">m</a>
    101:             <a class="dropdown-item" href="#">s</a>
    102:           </div>
  
app/views/statistics/index.html.erb:99
app/views/statistics/index.html.erb:88
app/controllers/application_controller.rb:10:in `switch_locale'
Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:42:49 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (4.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.9ms | Allocations: 6369)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.7ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.4ms | Allocations: 11001)
Completed 200 OK in 126ms (Views: 23.3ms | ActiveRecord: 72.1ms | Allocations: 26898)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:42:53 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.0ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.9ms | Allocations: 5509)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.9ms | Allocations: 8589)
Completed 200 OK in 121ms (Views: 17.4ms | ActiveRecord: 71.5ms | Allocations: 23778)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:28 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (30.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.7ms | Allocations: 5445)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.0ms | Allocations: 8508)
Completed 200 OK in 136ms (Views: 17.7ms | ActiveRecord: 75.2ms | Allocations: 36266)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:41 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.4ms | Allocations: 5445)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 360)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.5ms | Allocations: 8528)
Completed 200 OK in 161ms (Views: 17.1ms | ActiveRecord: 90.2ms | Allocations: 36284)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:41 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.1ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.0ms | Allocations: 8555)
Completed 200 OK in 119ms (Views: 19.4ms | ActiveRecord: 70.5ms | Allocations: 23729)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:42 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (33.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.3ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 18.6ms | Allocations: 8555)
Completed 200 OK in 124ms (Views: 19.0ms | ActiveRecord: 75.3ms | Allocations: 23720)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:42 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.8ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 18.4ms | Allocations: 8555)
Completed 200 OK in 118ms (Views: 18.8ms | ActiveRecord: 70.2ms | Allocations: 23737)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:44 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.5ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.3ms | Allocations: 8575)
Completed 200 OK in 120ms (Views: 17.7ms | ActiveRecord: 71.4ms | Allocations: 23757)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:43:54 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.4ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 5504)
  Rendered users/_login.html.erb (Duration: 0.3ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.9ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 8575)
Completed 200 OK in 118ms (Views: 17.8ms | ActiveRecord: 72.7ms | Allocations: 23733)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:46:35 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (35.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.8ms | Allocations: 6517)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.4ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 23.1ms | Allocations: 11129)
Completed 200 OK in 131ms (Views: 24.5ms | ActiveRecord: 77.2ms | Allocations: 27016)


Started GET "/statistics/index?title=benc" for ::1 at 2022-08-21 19:46:43 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (10.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (5.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.0ms | Allocations: 6499)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1235)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.3ms | Allocations: 11108)
Completed 200 OK in 142ms (Views: 21.8ms | ActiveRecord: 86.7ms | Allocations: 26990)


Started GET "/statistics/index?title=benc&series_pattern=m" for ::1 at 2022-08-21 19:46:49 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"m"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.8ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 17.7ms | Allocations: 5626)
  Rendered users/_login.html.erb (Duration: 0.1ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 21.9ms | Allocations: 8706)
Completed 200 OK in 125ms (Views: 22.5ms | ActiveRecord: 72.7ms | Allocations: 23871)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:47:32 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.7ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 5621)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 160)
  Rendered layouts/_header.html.erb (Duration: 0.4ms | Allocations: 351)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 16.6ms | Allocations: 8692)
Completed 200 OK in 115ms (Views: 17.1ms | ActiveRecord: 70.6ms | Allocations: 23859)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:49:38 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (1.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.2ms | Allocations: 6621)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.2ms | Allocations: 11254)
Completed 200 OK in 242ms (Views: 21.4ms | ActiveRecord: 72.0ms | Allocations: 27159)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:49:56 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.4ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (4.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 16.0ms | Allocations: 6596)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.8ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.7ms | Allocations: 11208)
Completed 200 OK in 123ms (Views: 23.0ms | ActiveRecord: 72.2ms | Allocations: 27085)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:50:04 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.5ms | Allocations: 6586)
  Rendered users/_login.html.erb (Duration: 0.6ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 2.1ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 11218)
Completed 200 OK in 131ms (Views: 25.5ms | ActiveRecord: 72.6ms | Allocations: 27101)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:50:12 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (1.1ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (53.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.1ms | Allocations: 6582)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1235)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.4ms | Allocations: 11211)
Completed 200 OK in 163ms (Views: 21.9ms | ActiveRecord: 97.1ms | Allocations: 27106)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:54:02 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (1.9ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 51.4ms | Allocations: 9837)
  Rendered users/_login.html.erb (Duration: 1.0ms | Allocations: 414)
  Rendered layouts/_header.html.erb (Duration: 2.4ms | Allocations: 1239)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 58.1ms | Allocations: 14478)
Completed 200 OK in 248ms (Views: 60.0ms | ActiveRecord: 82.1ms | Allocations: 42815)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:54:31 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.8ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.4ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 16.2ms | Allocations: 6307)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.4ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.3ms | Allocations: 10939)
Completed 200 OK in 164ms (Views: 22.7ms | ActiveRecord: 71.0ms | Allocations: 26843)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:54:48 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (4.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.5ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 15.6ms | Allocations: 6308)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1235)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.9ms | Allocations: 10937)
Completed 200 OK in 131ms (Views: 22.4ms | ActiveRecord: 77.1ms | Allocations: 26817)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:55:02 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (6.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.7ms | Allocations: 6308)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1235)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.3ms | Allocations: 10917)
Completed 200 OK in 126ms (Views: 21.7ms | ActiveRecord: 75.1ms | Allocations: 26801)


Started GET "/statistics/index?title=benc&series_pattern=r" for ::1 at 2022-08-21 19:55:14 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"benc", "series_pattern"=>"r"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.3ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 6314)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.5ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 20.0ms | Allocations: 10946)
Completed 200 OK in 125ms (Views: 21.3ms | ActiveRecord: 72.1ms | Allocations: 26828)


Started GET "/statistics/index?locale=en" for ::1 at 2022-08-21 19:55:38 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (30.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 12.8ms | Allocations: 5604)
  Rendered users/_login.html.erb (Duration: 0.3ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.8ms | Allocations: 461)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 17.2ms | Allocations: 8995)
Completed 200 OK in 122ms (Views: 18.2ms | ActiveRecord: 72.9ms | Allocations: 25512)


Started GET "/statistics/index?locale=en" for ::1 at 2022-08-21 19:56:29 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.3ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (1.7ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (32.8ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 18.1ms | Allocations: 9996)
  Rendered users/_login.html.erb (Duration: 0.6ms | Allocations: 414)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1241)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 23.3ms | Allocations: 14638)
Completed 200 OK in 151ms (Views: 25.1ms | ActiveRecord: 75.9ms | Allocations: 43870)


Started GET "/statistics/index?locale=en" for ::1 at 2022-08-21 19:56:36 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"locale"=>"en"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.6ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (4.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (31.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.0ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.0ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.5ms | Allocations: 6450)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1238)
  Rendered layouts/_footer.html.erb (Duration: 0.3ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.5ms | Allocations: 11088)
Completed 200 OK in 126ms (Views: 22.7ms | ActiveRecord: 74.2ms | Allocations: 27845)


Started GET "/statistics/index?locale=sk" for ::1 at 2022-08-21 19:56:39 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"locale"=>"sk"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (1.2ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.9ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (3.2ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (28.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 12.2ms | Allocations: 5565)
  Rendered users/_login.html.erb (Duration: 0.2ms | Allocations: 162)
  Rendered layouts/_header.html.erb (Duration: 0.6ms | Allocations: 459)
  Rendered layouts/_footer.html.erb (Duration: 0.0ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 15.9ms | Allocations: 8930)
Completed 200 OK in 137ms (Views: 16.9ms | ActiveRecord: 71.6ms | Allocations: 25439)


Started GET "/statistics/index?locale=sk" for ::1 at 2022-08-21 19:57:28 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"locale"=>"sk"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.4ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.1ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (33.4ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.2ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:108:in `evolution_ws'
  [1m[36mExerciseNode Load (1.9ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.9ms | Allocations: 6455)
  Rendered users/_login.html.erb (Duration: 0.5ms | Allocations: 413)
  Rendered layouts/_header.html.erb (Duration: 1.6ms | Allocations: 1236)
  Rendered layouts/_footer.html.erb (Duration: 0.5ms | Allocations: 171)
  Rendered layout layouts/application.html.erb (Duration: 21.2ms | Allocations: 11087)
Completed 200 OK in 125ms (Views: 23.1ms | ActiveRecord: 73.2ms | Allocations: 27832)


Started GET "/statistics/index?title=Benc&series_pattern=m" for ::1 at 2022-08-21 19:57:31 +0200
Processing by StatisticsController#index as HTML
  Parameters: {"title"=>"Benc", "series_pattern"=>"m"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  â†³ app/controllers/statistics_controller.rb:10:in `index'
  [1m[36mExercise Load (0.5ms)[0m  [1m[34mSELECT "exercises".* FROM "exercises" WHERE "exercises"."user_id" = $1 ORDER BY exercises.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:15:in `index'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM (SELECT 1 AS one FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2) subquery_for_count[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `evolution_time'
  [1m[36mExercise Load (2.5ms)[0m  [1m[34mSELECT exercises.time, nodes.sum, (nodes.sum/exercises.time::decimal) as result FROM "exercises" JOIN (SELECT SUM(LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series,length(series) - position('x' in series))::decimal) as sum, exercise_id FROM "exercise_nodes" WHERE (exercise_nodes.series LIKE '_x__' or exercise_nodes.series LIKE '_x_') GROUP BY "exercise_nodes"."exercise_id") as nodes ON exercises.id = nodes.exercise_id WHERE "exercises"."user_id" = $1 AND (exercises.title LIKE '%Cvicenie%') AND (exercises.time != '') LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:47:in `map'
  [1m[36mExerciseNode Load (3.9ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:60:in `top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda brusaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.2ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('zhyby'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('stojka'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (2.7ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('hrazda zdvih noh'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('drepy'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:68:in `block in top_exercise'
  [1m[36mExerciseNode Load (34.7ms)[0m  [1m[34mSELECT COUNT(*) as count, BTRIM(unaccent(lower(exercise_nodes.title))) as title FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.title NOT LIKE '%+%') GROUP BY BTRIM(unaccent(lower(exercise_nodes.title))) ORDER BY count ASC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 5]]
  â†³ app/controllers/statistics_controller.rb:85:in `bottom_exercise'
  [1m[36mExerciseNode Load (3.5ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.4ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('autobus'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.1ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('arnoldove tlaky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (2.3ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc u.uzky'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (3.6ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, exercise_nodes.series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('biceps jedno'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  â†³ app/controllers/statistics_controller.rb:93:in `block in bottom_exercise'
  [1m[36mExerciseNode Load (1.8ms)[0m  [1m[34mSELECT exercise_nodes.title, exercise_nodes.weight, (LEFT(series, position('x' in series) - 1)::decimal * RIGHT(series, length(series) - position('x' in series))::decimal) as series FROM "exercise_nodes" INNER JOIN "exercises" ON "exercises"."id" = "exercise_nodes"."exercise_id" WHERE "exercises"."user_id" = $1 AND (exercise_nodes.weight != '') AND (exercise_nodes.series LIKE '_x%') AND (BTRIM(unaccent(lower(exercise_nodes.title))) like BTRIM(unaccent('benc'))) ORDER BY exercise_nodes.created_at DESC LIMIT $2[0m  [["user_id", 1], ["LIMIT", 100]]
  â†³ app/controllers/statistics_controller.rb:132:in `evolution_ws'
  Rendering layout layouts/application.html.erb
  Rendering statistics/index.html.erb within layouts/application
[Webpacker] Everything's up-to-date. Nothing to do
  Rendered statistics/index.html.erb within layouts/application (Duration: 14.8ms | Allocations: 5369)
  Rendered users/_login.html.erb (Duration: 0.4ms | Allocations: 161)
  Rendered layouts/_header.html.erb (Duration: 1.2ms | Allocations: 357)
  Rendered layouts/_footer.html.erb (Duration: 0.1ms | Allocations: 29)
  Rendered layout layouts/application.html.erb (Duration: 19.2ms | Allocations: 8438)
Completed 200 OK in 123ms (Views: 19.7ms | ActiveRecord: 76.6ms | Allocations: 23623)


